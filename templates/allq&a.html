<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>AI„ÇØ„Ç§„Ç∫Ôºà10ÂïèÂõ∫ÂÆöÔºâ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: "Noto Sans JP", sans-serif; background: #f9f9f9; margin: 0; padding: 0; }
    .quiz-container { max-width: 600px; margin: 20px auto; padding: 20px; background: #fff;
      border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    h1 { color: #1976d2; font-size: 1.5rem; text-align: center; }
    button { padding: 10px 16px; border: none; border-radius: 8px; background: #1976d2; color: #fff;
      cursor: pointer; margin-top: 10px; }
    .choices button { display: block; width: 100%; margin: 6px 0; background: #eee; color: #333; }
    .choices button.correct { background: #c8f7c5; border: 1px solid #4caf50; }
    .choices button.wrong { background: #f7c5c5; border: 1px solid #e53935; }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h1>ÁµêÊ†∏„ÇØ„Ç§„Ç∫Ôºà10ÂïèÔºâ</h1>
    <button id="startBtn">„ÇØ„Ç§„Ç∫ÈñãÂßã</button>
    <div id="quiz"></div>
  </div>

  <!-- ‚úÖ Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script>
    // üîë Firebase Ë®≠ÂÆöÔºàËá™ÂàÜ„ÅÆÂÄ§„Å´ÁΩÆ„ÅçÊèõ„Åà„Å¶„Åè„Å†„Åï„ÅÑÔºâ
    const firebaseConfig = {
      apiKey: "„ÅÇ„Å™„Åü„ÅÆAPI„Ç≠„Éº",
      authDomain: "„ÅÇ„Å™„Åü„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà.firebaseapp.com",
      projectId: "„ÅÇ„Å™„Åü„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„ÉàID",
      storageBucket: "„ÅÇ„Å™„Åü„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„ÉàID.appspot.com",
      messagingSenderId: "XXXXXXX",
      appId: "XXXXXXXX"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ‚úÖ ÈùôÁöÑ„Å™„ÇØ„Ç§„Ç∫„Éá„Éº„ÇøÔºà10ÂïèÔºâ
    const allQuestions = [
      {
        question: "ÁµêÊ†∏„ÅØ‰∏ª„Å´„Å©„ÅÆËáìÂô®„Å´ÊÑüÊüì„Åó„Åæ„Åô„ÅãÔºü",
        choices: ["ÂøÉËáì", "ËÇ∫", "ËÇùËáì", "ËÖéËáì"],
        answer: "ËÇ∫",
        explanation: "ÁµêÊ†∏Ëèå„ÅØ‰∏ª„Å´ËÇ∫„Å´ÊÑüÊüì„Åó„Åæ„Åô„Åå„ÄÅÂÖ®Ë∫´„Å´„ÇÇÂ∫É„Åå„Çã„Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ"
      },
      {
        question: "ÁµêÊ†∏„ÅÆÂéüÂõ†Ëèå„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºü",
        choices: ["„Ç§„É≥„Éï„É´„Ç®„É≥„Ç∂„Ç¶„Ç§„É´„Çπ", "„Éû„Ç§„Ç≥„Éê„ÇØ„ÉÜ„É™„Ç¶„É†„Éª„ÉÅ„É•„Éô„É´„ÇØ„É≠„Éº„Ç∑„Çπ", "Â§ßËÖ∏Ëèå", "ÈªÑËâ≤„Éñ„Éâ„Ç¶ÁêÉËèå"],
        answer: "„Éû„Ç§„Ç≥„Éê„ÇØ„ÉÜ„É™„Ç¶„É†„Éª„ÉÅ„É•„Éô„É´„ÇØ„É≠„Éº„Ç∑„Çπ",
        explanation: "ÁµêÊ†∏„ÅØÁµêÊ†∏ËèåÔºàMycobacterium tuberculosisÔºâ„ÅåÂéüÂõ†„Åß„Åô„ÄÇ"
      },
      {
        question: "ÁµêÊ†∏„ÅÆ‰∏ª„Å™ÊÑüÊüìÁµåË∑Ø„ÅØÔºü",
        choices: ["È£ü„ÅπÁâ©", "È£õÊ≤´ÊÑüÊüì", "Êé•Ëß¶ÊÑüÊüì", "Ë°ÄÊ∂≤ÊÑüÊüì"],
        answer: "È£õÊ≤´ÊÑüÊüì",
        explanation: "Âí≥„ÇÑ„Åè„Åó„ÇÉ„Åø„Å´„Çà„ÇãÈ£õÊ≤´„ÇíÂê∏„ÅÑËæº„ÇÄ„Åì„Å®„ÅßÊÑüÊüì„Åó„Åæ„Åô„ÄÇ"
      },
      {
        question: "ÁµêÊ†∏„ÅÆË®∫Êñ≠„Å´‰Ωø„Çè„Çå„ÇãÊ§úÊüª„ÅØÔºü",
        choices: ["ËÉ∏ÈÉ®XÁ∑öÊ§úÊüª", "ÂøÉÈõªÂõ≥", "ËÖπÈÉ®„Ç®„Ç≥„Éº", "Â∞øÊ§úÊüª"],
        answer: "ËÉ∏ÈÉ®XÁ∑öÊ§úÊüª",
        explanation: "ÁµêÊ†∏„ÅÆÁñë„ÅÑ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„Åæ„ÅöËÉ∏ÈÉ®XÁ∑ö„ÅßËÇ∫„ÅÆÂΩ±„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ"
      },
      {
        question: "ÁµêÊ†∏„ÅÆÊ≤ªÁôÇ„ÅßÈáçË¶Å„Å™„ÅÆ„ÅØÔºü",
        choices: ["ÊäóÁîüÁâ©Ë≥™„Çí1ÈÄ±Èñì„Å†„ÅëÈ£≤„ÇÄ", "Èï∑ÊúüÈñì„ÅÆÊäóÁµêÊ†∏Ëñ¨ÊúçÁî®", "„Éì„Çø„Éü„É≥CÊëÇÂèñ", "ÂÆâÈùô„ÅÆ„Åø"],
        answer: "Èï∑ÊúüÈñì„ÅÆÊäóÁµêÊ†∏Ëñ¨ÊúçÁî®",
        explanation: "6„ÅãÊúà‰ª•‰∏ä„ÅÆÊúçËñ¨Á∂ôÁ∂ö„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ"
      },
      {
        question: "ÁµêÊ†∏Ê≤ªÁôÇ„Çí‰∏≠Êñ≠„Åô„Çã„Å®„Å©„ÅÜ„Å™„Çä„Åæ„Åô„ÅãÔºü",
        choices: ["„Åô„ÅêÊ≤ª„Çã", "Ëñ¨Ââ§ËÄêÊÄßÁµêÊ†∏„ÅåÁîü„Åò„Çã", "ÂâØ‰ΩúÁî®„ÅåÊ∏õ„Çã", "Áâπ„Å´Â§âÂåñ„ÅØ„Å™„ÅÑ"],
        answer: "Ëñ¨Ââ§ËÄêÊÄßÁµêÊ†∏„ÅåÁîü„Åò„Çã",
        explanation: "Ê≤ªÁôÇ‰∏≠Êñ≠„ÅØËÄêÊÄßËèå„ÇíÁîü„Åø„ÄÅÈõ£Ê≤ªÊÄß„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ"
      },
      {
        question: "Êó•Êú¨„ÅßÁµêÊ†∏„ÅÆÊÇ£ËÄÖÊï∞„ÅØ„Å©„ÅÆ„Åè„Çâ„ÅÑ„Åß„Åô„ÅãÔºü",
        choices: ["Âπ¥Èñì Á¥Ñ1‰∏á‰∫∫", "Âπ¥Èñì Á¥Ñ100‰∫∫", "Âπ¥Èñì Á¥Ñ50‰∏á‰∫∫", "Âπ¥Èñì Á¥Ñ1‰∫∫"],
        answer: "Âπ¥Èñì Á¥Ñ1‰∏á‰∫∫",
        explanation: "Êó•Êú¨„Åß„ÅØÂπ¥Èñì1‰∏á‰∫∫ÂâçÂæå„ÅÆÊñ∞Ë¶èÊÇ£ËÄÖ„ÅåÂ†±Âëä„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ"
      },
      {
        question: "ÁµêÊ†∏„ÅÆÂàùÊúüÁóáÁä∂„Å´ÂΩì„Å¶„ÅØ„Åæ„Çâ„Å™„ÅÑ„ÇÇ„ÅÆ„ÅØÔºü",
        choices: ["Âí≥", "Áô∫ÁÜ±", "‰ΩìÈáçÊ∏õÂ∞ë", "ÁõÆ„ÅÆ„Åã„ÇÜ„Åø"],
        answer: "ÁõÆ„ÅÆ„Åã„ÇÜ„Åø",
        explanation: "Âí≥„ÉªÁô∫ÁÜ±„Éª‰ΩìÈáçÊ∏õÂ∞ë„ÅØÂÖ∏ÂûãÁöÑ„Å™ÁóáÁä∂„Åß„Åô„ÅåÁõÆ„ÅÆ„Åã„ÇÜ„Åø„ÅØÈñ¢‰øÇ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"
      },
      {
        question: "ÁµêÊ†∏„ÅÆÊÑüÊüì‰∫àÈò≤„Å´ÊúâÂäπ„Å™„ÉØ„ÇØ„ÉÅ„É≥„ÅØÔºü",
        choices: ["„Ç§„É≥„Éï„É´„Ç®„É≥„Ç∂„ÉØ„ÇØ„ÉÅ„É≥", "BCG„ÉØ„ÇØ„ÉÅ„É≥", "MMR„ÉØ„ÇØ„ÉÅ„É≥", "Ê∞¥Áóò„ÉØ„ÇØ„ÉÅ„É≥"],
        answer: "BCG„ÉØ„ÇØ„ÉÅ„É≥",
        explanation: "‰π≥ÂÖê„Å´Êé•Á®Æ„Åï„Çå„ÇãBCG„ÉØ„ÇØ„ÉÅ„É≥„ÅØÈáçÁóáÁµêÊ†∏‰∫àÈò≤„Å´ÊúâÂäπ„Åß„Åô„ÄÇ"
      },
      {
        question: "ÁµêÊ†∏„ÅÆÊ≤ªÁôÇ„ÅßÊúÄ„ÇÇÈáçË¶Å„Å™„Åì„Å®„ÅØÔºü",
        choices: ["ÈÅãÂãïÂà∂Èôê", "ÂçÅÂàÜ„Å™Ê∞¥ÂàÜÊëÇÂèñ", "ÊúçËñ¨„ÅÆÁ∂ôÁ∂ö", "Ê†ÑÈ§äË£úÂä©È£üÂìÅ„ÅÆÊëÇÂèñ"],
        answer: "ÊúçËñ¨„ÅÆÁ∂ôÁ∂ö",
        explanation: "ÈÄî‰∏≠„Åß„ÇÑ„ÇÅ„Åö„Å´„Åó„Å£„Åã„ÇäÈ£≤„ÅøÁ∂ö„Åë„Çã„Åì„Å®„ÅåÈáçË¶Å„Åß„Åô„ÄÇ"
      }
    ];

    let currentIndex = 0;
    let score = 0;

    function renderQuestion() {
      const container = document.getElementById("quiz");
      container.innerHTML = "";

      if (currentIndex >= allQuestions.length) {
        container.innerHTML = `<h2>ÁµÇ‰∫ÜÔºÅ</h2>
          <p>„Çπ„Ç≥„Ç¢: ${score} / ${allQuestions.length}</p>`;

        // ‚úÖ Firestore „Å´„Çπ„Ç≥„Ç¢‰øùÂ≠ò
        db.collection("ai_quiz_scores").add({
          score: score,
          total: allQuestions.length,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        }).then(() => console.log("‰øùÂ≠òOK"))
          .catch(err => console.error("‰øùÂ≠òÂ§±Êïó", err));
        return;
      }

      const q = allQuestions[currentIndex];
      const div = document.createElement("div");
      div.innerHTML = `
        <p><b>Q${currentIndex + 1}: ${q.question}</b></p>
        <div class="choices">
          ${q.choices.map(c => `<button>${c}</button>`).join("")}
        </div>
        <p style="display:none;" class="exp">Ëß£Ë™¨: ${q.explanation}</p>
      `;

      div.querySelectorAll(".choices button").forEach(btn => {
        btn.addEventListener("click", () => {
          const exp = div.querySelector(".exp");
          exp.style.display = "block";
          if (btn.textContent === q.answer) {
            btn.classList.add("correct"); score++;
          } else {
            btn.classList.add("wrong");
          }
          const nextBtn = document.createElement("button");
          nextBtn.textContent = currentIndex + 1 === allQuestions.length ? "ÁµêÊûú„ÇíË¶ã„Çã" : "Ê¨°„Å∏";
          nextBtn.addEventListener("click", () => { currentIndex++; renderQuestion(); });
          div.appendChild(nextBtn);
          div.querySelectorAll(".choices button").forEach(b => b.disabled = true);
        });
      });

      container.appendChild(div);
    }

    document.getElementById("startBtn").addEventListener("click", () => {
      score = 0; currentIndex = 0;
      renderQuestion();
    });
  </script>
</body>
</html>
